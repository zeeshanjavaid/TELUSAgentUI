<wm-partial name="partial122">
    <wm-container width="100%" name="container1" style="display: flex; flex-direction: column;">
        <wm-gridcolumn width="100%" name="gridcolumn2">
            <wm-table name="collectionContactExpansionTable" dataset="bind:Variables.expandedRowData.dataSet" navigation="None" pagesize="5" navigationalign="right" tablewidth="1500px" gridclass="table-hover table-striped" show="false">
                <wm-table-column binding="contactId" caption="Contact ID" width="100px" edit-widget-type="text" type="string" readonly="true" show="false"></wm-table-column>
                <wm-table-column binding="entityId" caption="Entity ID" width="100px" edit-widget-type="text" type="string" readonly="true" show="false"></wm-table-column>
                <wm-table-column binding="email" caption="Email" width="200px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="phoneNumber" caption="Phone Number" width="150px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="contactForNotices" caption="Notify" widget-type="checkbox" width="80px" textalignment="center" edit-widget-type="checkbox" type="string" readonly="true" show="true">
                    <wm-checkbox datavalue="bind:row.getProperty('contactForNotices')" disabled="true" on-change="collectionContactExpansionTable_contactForNoticesOnChange($event, widget, row)" conditionalclass=""></wm-checkbox>
                </wm-table-column>
                <!--wm-table-column binding="dataSource" caption="Data Source" width="150px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column-->
                <wm-table-column binding="dataSource" caption="Data Source" width="150px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true">
                    <wm-label caption="bind: row.getProperty('dataSource') === 'FAWBTELUSAGENT' ? 'Internal' : row.getProperty('dataSource')"></wm-label>
                </wm-table-column>
                <wm-table-column binding="comments" caption="Comments" width="150px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="lastUpdatedDateTime" caption="Last Updated" width="100px" edit-widget-type="text" type="string" readonly="true" datepattern="yyyy-MM-dd" formatpattern="toDate" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="lastDeliverySuccessDateTime" caption="Last Successful Delivery" width="100px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="lastDeliveryFailureDateTime" caption="Last Failed Delivery" width="100px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="lastResultDescription" caption="Last Customer Response" width="200px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="lastPaymnentActionDateTime" caption="Last Payment Attempt" width="100px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="rowOperations" caption="Options" width="80px" edit-widget-type="text" type="custom" readonly="true" sortable="false" searchable="false" show="true"></wm-table-column>
                <wm-table-row-action key="customRow1" display-name="" show="true" class="btn-transparent" iconclass="fico-icon-pencil" title="Edit" action="collectionContactExpansionTable_customRow1Action($event, row)" disabled="false"
                    widget-type="button"></wm-table-row-action>
                <wm-table-row-action key="customRow2" display-name="" show="true" class="btn-transparent" iconclass="fico-icon-payment-cancel" title="Invalidate" action="collectionContactExpansionTable_customRow2Action($event, row)"
                    disabled="false" widget-type="button"></wm-table-row-action>
            </wm-table>
        </wm-gridcolumn>
    </wm-container>
    <wm-dialog dialogtype="design-dialog" modal="true" title="Invalidate Contact" iconclass="" name="invalidateContactDialog" width="30%">
        <wm-layoutgrid name="layoutgrid11_1">
            <wm-gridrow name="gridrow17" padding="0.4em unset unset unset">
                <wm-gridcolumn columnwidth="12" name="gridcolumn36">
                    <wm-label caption="Are you sure you want to invalidate this contact?" name="label36"></wm-label>
                </wm-gridcolumn>
            </wm-gridrow>
        </wm-layoutgrid>
        <wm-layoutgrid name="layoutgrid11_11"></wm-layoutgrid>
        <wm-layoutgrid name="layoutgrid11_2"></wm-layoutgrid>
        <wm-dialogactions name="dialogactions4" style="text-align: right;">
            <wm-button class="secondaryButton" caption="No" on-click="closeAction_NoClick($event, widget)" name="closeAction_No"></wm-button>
            <wm-button class="primaryButton" caption="Yes" type="button" margin="unset 0.5em" name="assigned_closeYesBtn" on-click="closeAction_NoClick($event, widget)"></wm-button>
        </wm-dialogactions>
    </wm-dialog>
    <wm-dialog dialogtype="design-dialog" modal="true" title="Edit Contact" iconclass="" name="editContactDialog" width="30%">
        <wm-layoutgrid name="layoutgrid11_1">
            <wm-gridrow name="gridrow17" padding="0.4em unset unset unset">
                <wm-gridcolumn columnwidth="12" name="gridcolumn36">
                    <wm-label caption="Are you sure you want to invalidate this contact?" name="label36"></wm-label>
                </wm-gridcolumn>
            </wm-gridrow>
        </wm-layoutgrid>
        <wm-layoutgrid name="layoutgrid11_11"></wm-layoutgrid>
        <wm-layoutgrid name="layoutgrid11_2"></wm-layoutgrid>
        <wm-dialogactions name="dialogactions4" style="text-align: right;">
            <wm-button class="secondaryButton" caption="No" on-click="closeAction_NoClick($event, widget)" name="closeAction_No"></wm-button>
            <wm-button class="primaryButton" caption="Yes" type="button" margin="unset 0.5em" name="assigned_closeYesBtn" on-click="closeAction_NoClick($event, widget)"></wm-button>
        </wm-dialogactions>
    </wm-dialog>
    <wm-container width="100%" name="container2" style="display: flex; flex-direction: column;">
        <wm-gridcolumn width="100%" name="gridcolumn2">
            <wm-table editmode="inline" name="expandedRowDataTable1" title="" dataset="bind:Variables.expandedRowData.dataSet" navigation="Classic" on-beforerowupdate="expandedRowDataTable1Beforerowupdate($event, widget, row, options)" pagesize="5" navigationalign="right"
                tablewidth="1500px" on-rowdelete="expandedRowDataTable1Rowdelete($event, widget, row)">
                <wm-table-column binding="contactId" caption="Contact ID" width="100px" edit-widget-type="text" type="string" readonly="true" show="false"></wm-table-column>
                <wm-table-column binding="entityId" caption="Entity ID" width="100px" edit-widget-type="text" type="string" readonly="true" show="false"></wm-table-column>
                <wm-table-column binding="email" caption="Email" width="200px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="phoneNumber" caption="Phone Number" widget-type="label" width="150px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true">
                    <wm-label caption="bind:row.getProperty('phoneNumber')&amp;&amp; row.getProperty('phoneNumber').length === 10 ? 
        '(' + row.getProperty('phoneNumber').substring(0, 3) + ')' + 
        row.getProperty('phoneNumber').substring(3, 6) + '-' + 
        row.getProperty('phoneNumber').substring(6, 10) : row.getProperty('phoneNumber')" class="" conditionalclass=""></wm-label>
                </wm-table-column>
                <wm-table-column binding="contactForNotices" caption="Use for Notification" widget-type="checkbox" width="80px" textalignment="center" edit-widget-type="checkbox" type="string" show="true" readonly="false">
                    <wm-checkbox datavalue="bind:row.getProperty('contactForNotices')" disabled="true" on-change="collectionContactExpansionTable_contactForNoticesOnChange($event, widget, row)" conditionalclass=""></wm-checkbox>
                </wm-table-column>
                <wm-table-column binding="dataSource" caption="Data Source" widget-type="label" width="150px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true">
                    <wm-label caption="bind:row.getProperty('dataSource')==='FAWBTELUSAGENT' ? 'Internal' : row.getProperty('dataSource')" class="" conditionalclass=""></wm-label>
                </wm-table-column>
                <wm-table-column binding="comments" caption="Comments" width="180px" edit-widget-type="textarea" type="string" searchable="false" show="true" readonly="false" on-keydown="expandedRowDataTable1_commentsOnKeydown($event, widget, row)"></wm-table-column>
                <wm-table-column binding="lastUpdatedDateTime" caption="Last Updated" width="100px" edit-widget-type="text" type="string" readonly="true" datepattern="yyyy-MM-dd" formatpattern="toDate" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="smsOptOutIndicator" caption="SMS Opt Out" widget-type="label" width="90px" textalignment="center" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true">
                    <wm-label caption="bind: row.getProperty('smsOptOutIndicator') == null ? '' : (row.getProperty('smsOptOutIndicator') ? 'Y' : 'N')" class="" conditionalclass=""></wm-label>
                </wm-table-column>
                <wm-table-column binding="lastDeliverySuccessDateTime" caption="Last Delivery" width="100px" edit-widget-type="text" type="string" readonly="true" datepattern="yyyy-MM-dd" formatpattern="toDate" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="lastDeliveryFailureDateTime" caption="Last Failed Delivery" width="100px" edit-widget-type="text" type="string" readonly="true" datepattern="yyyy-MM-dd" formatpattern="toDate" searchable="false"
                    show="true"></wm-table-column>
                <wm-table-column binding="lastResultDescription" caption="Last Customer Response" width="200px" edit-widget-type="text" type="string" readonly="true" searchable="false" show="true"></wm-table-column>
                <wm-table-column binding="lastPaymnentActionDateTime" caption="Last Payment Attempt" width="100px" edit-widget-type="text" type="string" readonly="true" datepattern="yyyy-MM-dd" formatpattern="toDate" searchable="false"
                    show="true"></wm-table-column>
                <wm-table-column binding="rowOperations" caption="Options" width="80px" edit-widget-type="text" type="custom" readonly="true" sortable="false" searchable="false" show="true"></wm-table-column>
                <wm-table-row-action key="updaterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-edit" title="Edit" action="editRow($event)" disabled="false" widget-type="button"></wm-table-row-action>
                <wm-table-row-action key="deleterow" display-name="" show="true" class="btn-transparent" iconclass="wi wi-trash fico fico-icon-trash" title="Delete" action="deleteRow($event)" disabled="false" widget-type="button"></wm-table-row-action>
            </wm-table>
        </wm-gridcolumn>
    </wm-container>
</wm-partial>